"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6842,9689],{29689:function(x,e,r){r.r(e);var n=r(85893),t=r(67294),s=r(68387),i=r(45007);e.default=x=>{let{children:e,onNotificationReceived:r}=x,[o,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[u,g]=(0,t.useState)(!1),[f,p]=(0,t.useState)(""),{fetchToken:d,onMessageListener:h}=(0,s.Z)(),v=(0,i.v9)(x=>{var e;return null===(e=x.WebSetting)||void 0===e?void 0:e.fcmToken}),k=async()=>{await d(g,p)};return(0,t.useEffect)(()=>{k()},[l]),(0,t.useEffect)(()=>{c(v)},[l]),(0,t.useEffect)(()=>{h().then(x=>{x&&x.data&&(a(x.data),r(x.data))}).catch(x=>{console.error("Error handling foreground notification:",x)})},[o,r]),(0,t.useEffect)(()=>{f&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(x=>{console.info("Service Worker registration successful with scope: ",x.scope)}).catch(x=>{console.error("Service Worker registration failed: ",x)})},[f]),(0,n.jsx)(n.Fragment,{children:e})}},68387:function(x,e,r){var n=r(83977),t=r(20061),s=r(80770),i=r(2370),o=r(30836),a=r(87076);e.Z=()=>{let x={apiKey:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",authDomain:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",projectId:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",storageBucket:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",messagingSenderId:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",appId:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",measurementId:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"};s.Z.apps.length||s.Z.initializeApp(x);let e=(0,n.ZF)(x),r=(0,i.v0)(e),l=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)(x),c=async()=>{if("serviceWorker"in navigator)try{let x=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.info("Service Worker registered:",x.scope),x}catch(x){console.error("Service Worker registration failed:",x)}return null},u=async()=>{try{if(await (0,t.Gb)())return(0,t.KL)(l);return console.error("Firebase messaging is not supported in this browser"),(0,a.e8)(),null}catch(x){return console.error("Error checking messaging support:",x),null}};return{firebaseApp:l,authentication:r,fetchToken:async(x,e)=>{try{await c();let r=await u();if(!r){console.error("Messaging not supported in this browser"),null==x||x(!1),null==e||e(null);return}let n=await Notification.requestPermission();if("granted"!==n){console.error("Notification permission denied"),null==x||x(!1),null==e||e(null);return}let s=await (0,t.LP)(r,{vapidKey:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});s?(null==e||e(s),(0,o.Cw)(s),null==x||x(!0)):(console.error("No token available"),null==x||x(!1),null==e||e(null))}catch(r){console.error("Error fetching token:",r),null==x||x(!1),null==e||e(null)}},onMessageListener:async()=>{let x=await u();return x?new Promise(e=>{(0,t.ps)(x,x=>{e(x)})}):(console.error("Messaging not supported."),null)},signOut:()=>r.signOut()}}}}]);